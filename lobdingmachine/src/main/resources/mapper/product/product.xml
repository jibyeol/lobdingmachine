<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.ldcc.lobdingmachine.dao.ProductDao">
	
	<select id="getProductByCategoryIdx" 
		resultType="Product" parameterType="int">
		SELECT 
		    *
		FROM
		    ldcc.product
		WHERE
		    category_idx = #{categoryIdx};
	</select>
	
	<insert id="setbuyProduct" parameterType="String">
		insert INTO ldcc.payment
		(member_idx, product_idx, pay_date, machine_idx)
		values
	<foreach collection="productList" item="buy"
      open="(" separator="," close=")">
        (1, #{buy.idx}, now(), 1);
  	</foreach>
	</insert>
	
	
</mapper>
